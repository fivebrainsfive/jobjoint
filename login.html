<script>
  function login() {
    const emailVal = email.value;
    const passVal = password.value;

    auth.signInWithEmailAndPassword(emailVal, passVal)
      .then(() => {
        const user = auth.currentUser;
        if (user.emailVerified) {
          db.collection("users").doc(user.uid).get().then(doc => {
            const data = doc.data();
            if (data.role === "worker") window.location.href = "worker.html";
            else window.location.href = "graduate.html";
          });
        } else {
          alert("Please verify your email before logging in.");
          auth.signOut();
        }
      })
      .catch(e => alert(e.message));
  }
</script>
